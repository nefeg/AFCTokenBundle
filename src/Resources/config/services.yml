parameters:
    afct.param.secret: "%env(AFCT_SECRET)%"
    afct.param.public_file: "%env(AFCT_PUBLIC_PATH)%"
    afct.param.private_file: "%env(AFCT_PRIVATE_PATH)%"


services:
    _defaults:
        autowire: false      # Automatically injects dependencies in your services.
        autoconfigure: false # Automatically registers your services as commands, event subscribers, etc.
        public: true         # this makes public all the services defined in this file


    afct.service:
        class: AFCTokenBundle\Service\TokenService
        arguments: []




    afct.key_public.file:
        class: AFCTokenBundle\Service\CryptKey\FileKey
        arguments: ["%afct.param.public_file%"]

    afct.key_private.file:
        class: AFCTokenBundle\Service\CryptKey\FileKey
        arguments: ["%afct.param.private_file%"]




    afct.serializer:
        class: AFCTokenBundle\Service\TokenSerializerService
        arguments: ["%afct.param.secret%", "@afct.key_private.file"]

    afct.deserializer:
        class: AFCTokenBundle\Service\TokenDeserializerService
        arguments: ["%afct.param.secret%", "@afct.key_public.file"]